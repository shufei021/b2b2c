{"version":3,"file":"index.js","sources":["../../../src/lib/browser/lib/core.js","../../../src/lib/browser/index.js"],"sourcesContent":["/*\r\n * @Description:\r\n * @Author: shufei\r\n * @Date: 2020-11-11 21:01:15\r\n * @LastEditTime: 2020-12-07 14:18:57\r\n * @LastEditors: shufei\r\n */\r\n\r\nexport const browserType = function () {\r\n    var ua = window.navigator.userAgent\r\n    var isIE = 'ActiveXObject' in window\r\n    var isChrome = ua.match(/Chrome/i)\r\n    var isMobile = !!(ua.match(/(iPhone|iPad|iPod)/i) || ua.match(/Android/i) || ua.match(/Windows Phone/i) || ua.match(/IEMobile/i))\r\n    let isIos = !!ua.match(/(iPhone|iPad|iPod)/i)\r\n    let isAndroid = !!ua.match(/Android/i)\r\n    let isTencentAgent = ua.match(/MicroMessenger/i) == 'MicroMessenger'\r\n    let isWx = isTencentAgent && ua.match(/wxwork/i) != 'wxwork'\r\n    let isWxMobile = isTencentAgent && ua.match(/wxwork/i) != 'wxwork' && ua.match(/Mobile/i) == 'Mobile'\r\n    let isWxPc = isTencentAgent && ua.match(/wxwork/i) != 'wxwork' && ua.match(/Mobile/i) != 'Mobile'\r\n    let isWxWork = isTencentAgent && ua.match(/wxwork/i) == 'wxwork'\r\n    let isWxWorkMobile = isTencentAgent && ua.match(/wxwork/i) == 'wxwork' && ua.match(/Mobile/i) == 'Mobile'\r\n    let isWxWorkPc = isTencentAgent && ua.match(/wxwork/i) == 'wxwork' && ua.match(/Mobile/i) != 'Mobile'\r\n\r\n    var IEVersion = null\r\n    var isIE8, isIE9, isIE10, isIE11\r\n    isIE8 = isIE9 = isIE10 = isIE11 = false\r\n    var appName = navigator.appName\r\n    if (appName == 'Microsoft Internet Explorer' || isIE) {\r\n        var ret = ua.match(/MSIE (\\d+[.\\d]*)/)\r\n        if (ret) {\r\n            var version = ret[1]\r\n            IEVersion = version\r\n            var num = parseInt(version, 10)\r\n            isIE8 = num === 8\r\n            isIE9 = num == 9\r\n            isIE10 = num == 10\r\n            isIE11 = num == 11\r\n        }\r\n    }\r\n    return {\r\n        isChrome, // 是否Chrome浏览器\r\n        isIE, // 是否IE浏览器\r\n        isMobile, // 是否移动端\r\n        IEVersion,\r\n        isIE8,\r\n        isIE9,\r\n        isIE10,\r\n        isIE11,\r\n        isIos,\r\n        isAndroid,\r\n        isWx,\r\n        isWxMobile,\r\n        isWxPc,\r\n        isWxWork,\r\n        isWxWorkMobile,\r\n        isWxWorkPc\r\n    }\r\n}\r\n\r\n/**\r\n * 进入全屏模式\r\n */\r\nexport const toFullScreen = function () {\r\n    let elem = document.body\r\n    elem.webkitRequestFullScreen\r\n        ? elem.webkitRequestFullScreen()\r\n        : elem.mozRequestFullScreen\r\n        ? elem.mozRequestFullScreen()\r\n        : elem.msRequestFullscreen\r\n        ? elem.msRequestFullscreen()\r\n        : elem.requestFullScreen\r\n        ? elem.requestFullScreen()\r\n        : alert('浏览器不支持全屏')\r\n}\r\n\r\n/**\r\n * 退出全屏模式\r\n */\r\nexport const exitFullscreen = function () {\r\n    let elem = parent.document\r\n    elem.webkitCancelFullScreen\r\n        ? elem.webkitCancelFullScreen()\r\n        : elem.mozCancelFullScreen\r\n        ? elem.mozCancelFullScreen()\r\n        : elem.cancelFullScreen\r\n        ? elem.cancelFullScreen()\r\n        : elem.msExitFullscreen\r\n        ? elem.msExitFullscreen()\r\n        : elem.exitFullscreen\r\n        ? elem.exitFullscreen()\r\n        : alert('切换失败,可尝试Esc退出')\r\n}\r\nexport const isPC = function () {\r\n    return !('ontouchstart' in window)\r\n}\r\n//是否移动端\r\nexport const isMobile = function () {\r\n    return 'ontouchstart' in window\r\n}\r\n//是否android\r\nexport const isAndroid = function () {\r\n    var u = navigator.userAgent\r\n    return u.indexOf('Android') > -1 || u.indexOf('Adr') > -1\r\n}\r\n//是否ios终端\r\nexport const isiOS = function () {\r\n    var u = navigator.userAgent\r\n    return !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)\r\n}\r\n\r\n//缓存函数\r\nexport const createCache = function () {\r\n    var keys = []\r\n    function cache(key, value) {\r\n        // 使用(key + \" \") 是为了避免和原生（本地）的原型中的属性冲突\r\n        if (keys.push(key + ' ') > 3) {\r\n            // 只保留最新存入的数据\r\n            delete cache[keys.shift()]\r\n        }\r\n        // 1 给 cache 赋值\r\n        // 2 把值返回\r\n        return (cache[key + ' '] = value)\r\n    }\r\n    return cache\r\n}\r\n//一次性函数\r\nexport const runOnce = function (fn) {\r\n    fn()\r\n    runOnce = function () {}\r\n}\r\n\r\n//PC端弹出新窗口\r\nexport const openWindow = (url, title, width, height, left, top, resizable) => {\r\n    if (typeof width == 'string' && width.indexOf('%') != -1) {\r\n        width = Math.floor(screen.availWidth * (parseFloat(width.replace('%', '')) / 100))\r\n    }\r\n    if (typeof height == 'string' && height.indexOf('%') != -1) {\r\n        height = Math.floor(screen.availWidth * (parseFloat(height.replace('%', '')) / 100))\r\n    }\r\n    if (!left) left = (screen.availWidth - width) / 2\r\n    if (!top) top = (screen.availHeight - height) / 2\r\n    if (resizable !== false) resizable = true\r\n    var parameters = [\r\n        'width=' + Math.min(width, screen.availWidth - 100),\r\n        'height=' + Math.min(height, screen.availHeight - 100),\r\n        'left=' + left,\r\n        'top=' + top,\r\n        'resizable=' + (resizable ? 'yes' : 'no'),\r\n        'toolbar=no,menubar=no,location=no,status=no,scrollbars=yes'\r\n    ]\r\n    if (title) {\r\n        url = url + (url.indexOf('?') === -1 ? '?' : '&') + 'windowtitle=' + encodeURI(title)\r\n    }\r\n\r\n    var re = window.open(url, title, parameters.join(','))\r\n    try {\r\n        re.focus()\r\n        return re\r\n    } catch (e) {\r\n        alert('弹出窗口可能已被浏览器拦截，请确认浏览器是否启用了弹出窗口拦截程序。')\r\n    }\r\n}\r\n","/*\r\n * @Description:\r\n * @Author: shufei\r\n * @Date: 2020-08-24 08:26:55\r\n * @LastEditTime: 2020-12-21 10:56:43\r\n * @LastEditors: shufei\r\n */\r\n/**\r\n *\r\n * 浏览器客户端交互\r\n *\r\n */\r\n\r\nimport * as browser from './lib/core'\r\nfunction Rbrowser() {\r\n    if (!(this instanceof Rbrowser)) throw new TypeError('Cannot call a class as a function')\r\n}\r\nRbrowser.prototype = browser\r\nexport default new Rbrowser()\r\n"],"names":["runOnce","fn","Rbrowser","this","TypeError","prototype","isIE9","isIE10","isIE11","ua","window","navigator","userAgent","isIE","isChrome","match","isMobile","isIos","isAndroid","isTencentAgent","isWx","isWxMobile","isWxPc","isWxWork","isWxWorkMobile","isWxWorkPc","IEVersion","isIE8","appName","ret","version","num","parseInt","elem","document","body","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","requestFullScreen","alert","parent","webkitCancelFullScreen","mozCancelFullScreen","cancelFullScreen","msExitFullscreen","exitFullscreen","u","indexOf","keys","cache","key","value","push","shift","url","title","width","height","left","top","resizable","Math","floor","screen","availWidth","parseFloat","replace","availHeight","parameters","min","encodeURI","re","open","join","focus","e"],"mappings":"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"}