{"version":3,"file":"index.js","sources":["../../../src/lib/session/index.js","../../../src/lib/session/lib/core.js"],"sourcesContent":["/*\r\n * @Description: 回话窗口缓存 sessionStorage 类 Session\r\n * @Author: shufei\r\n * @Date: 2020-08-24 08:26:55\r\n * @LastEditTime: 2021-01-15 15:09:55\r\n * @LastEditors: shufei\r\n */\r\nimport * as session from './lib/core'\r\nfunction Rsession() {\r\n    if (!(this instanceof Rsession)) throw new TypeError('Cannot call a class as a function')\r\n}\r\nRsession.prototype = session\r\nexport default new Rsession()\r\n","/*\r\n * @Description: sessionStorage  回话窗口缓存 封装\r\n * @Author: shufei\r\n * @Date: 2021-01-04 14:57:56\r\n * @LastEditTime: 2021-01-18 08:44:00\r\n * @LastEditors: shufei\r\n */\r\n\r\n/**\r\n * @description: 回话窗口缓存 获取\r\n * @param :\r\n * @return {*}\r\n */\r\nexport const get = function (keys) {\r\n    let ret = {}\r\n    // keys 参数 是数组\r\n    if (Array.isArray(keys)) {\r\n        for (let j = 0; j < keys.length; j++) {\r\n            if (typeof keys[j] === 'string' && sessionStorage.getItem(keys[j])) {\r\n                try {\r\n                    ret[keys[j]] = JSON.parse(sessionStorage.getItem(keys[j]))\r\n                } catch (error) {\r\n                    ret[keys[j]] = sessionStorage.getItem(keys[j])\r\n                }\r\n            }\r\n        }\r\n        return Object.keys(ret).length ? ret : false\r\n    } else if (typeof keys === 'string' && sessionStorage.getItem(keys)) {\r\n        try {\r\n            return JSON.parse(sessionStorage.getItem(keys))\r\n        } catch (error) {\r\n            return sessionStorage.getItem(keys)\r\n        }\r\n    }\r\n}\r\n/**\r\n * @description: 回话窗口缓存 新增/编辑更新\r\n * @param :\r\n * @return {*}\r\n */\r\nexport const set = function (key, val) {\r\n    if (typeof key === 'string' && arguments.length == 2) {\r\n        //set(key,val)\r\n        sessionStorage.setItem(key, JSON.stringify(val))\r\n    } else if (Array.isArray(key)) {\r\n        //set([{key1:val1},{key2:val2}]) or set([{key1:val1,k11:val22},{key2:val2}])\r\n        for (let i = 0; i < key.length; i++) {\r\n            if (Object.prototype.toString.call(key[i]).slice(8, -1) === 'Object') {\r\n                for (let k in key[i]) {\r\n                    sessionStorage.setItem(k, JSON.stringify(key[i][k]))\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        //set({key1:val1,k11:val22},{key2:val2})\r\n        let args = [...arguments]\r\n        for (let i = 0; i < args.length; i++) {\r\n            if (Object.prototype.toString.call(args[i]).slice(8, -1) === 'Object') {\r\n                for (let k in args[i]) {\r\n                    sessionStorage.setItem(k, JSON.stringify(args[i][k]))\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @description: 回话窗口缓存 移除\r\n * @param :\r\n * @return {*}\r\n */\r\nexport const remove = function () {\r\n    let args = [...arguments]\r\n    for (let i = 0; i < args.length; i++) {\r\n        typeof args[i] === 'string' && sessionStorage.removeItem(args[i])\r\n        Array.isArray(args[i]) && this.remove(...args[i])\r\n    }\r\n}\r\n/**\r\n * @description: 回话窗口缓存 清除\r\n * @param :\r\n * @return {*}\r\n */\r\nexport const clear = function () {\r\n    sessionStorage.clear()\r\n}\r\n/**\r\n * @description: 回话窗口缓存 获取所有的\r\n * @param :\r\n * @return {*}\r\n */\r\nexport const getAll = function () {\r\n    return Object.keys(sessionStorage).reduce((p, c) => ((p[c] = this.get(c)), p), {})\r\n}\r\n"],"names":["Rsession","this","TypeError","prototype","keys","ret","Array","isArray","j","length","sessionStorage","getItem","JSON","parse","error","Object","key","val","arguments","setItem","stringify","i","toString","call","slice","k","args","removeItem","remove","clear","reduce","p","c","_this","get"],"mappings":"i9BAQA,SAASA,SACCC,gBAAgBD,GAAW,MAAM,IAAIE,UAAU,4CAEzDF,EAASG,4CCEU,SAAUC,OACrBC,EAAM,MAENC,MAAMC,QAAQH,GAAO,KAChB,IAAII,EAAI,EAAGA,EAAIJ,EAAKK,OAAQD,OACN,iBAAZJ,EAAKI,IAAmBE,eAAeC,QAAQP,EAAKI,QAEvDH,EAAID,EAAKI,IAAMI,KAAKC,MAAMH,eAAeC,QAAQP,EAAKI,KACxD,MAAOM,GACLT,EAAID,EAAKI,IAAME,eAAeC,QAAQP,EAAKI,YAIhDO,OAAOX,KAAKC,GAAKI,QAASJ,EAC9B,GAAoB,iBAATD,GAAqBM,eAAeC,QAAQP,cAE/CQ,KAAKC,MAAMH,eAAeC,QAAQP,IAC3C,MAAOU,UACEJ,eAAeC,QAAQP,SASvB,SAAUY,EAAKC,MACX,iBAARD,GAAwC,GAApBE,UAAUT,OAErCC,eAAeS,QAAQH,EAAKJ,KAAKQ,UAAUH,SACxC,GAAIX,MAAMC,QAAQS,QAEhB,IAAIK,EAAI,EAAGA,EAAIL,EAAIP,OAAQY,OACgC,WAAxDN,OAAOZ,UAAUmB,SAASC,KAAKP,EAAIK,IAAIG,MAAM,GAAI,OAC5C,IAAIC,KAAKT,EAAIK,GACdX,eAAeS,QAAQM,EAAGb,KAAKQ,UAAUJ,EAAIK,GAAGI,kBAMxDC,6BAAWR,WACNG,EAAI,EAAGA,EAAIK,EAAKjB,OAAQY,OACgC,WAAzDN,OAAOZ,UAAUmB,SAASC,KAAKG,EAAKL,IAAIG,MAAM,GAAI,OAC7C,IAAIC,KAAKC,EAAKL,GACfX,eAAeS,QAAQM,EAAGb,KAAKQ,UAAUM,EAAKL,GAAGI,aAW/C,mBACdC,6BAAWR,WACNG,EAAI,EAAGA,EAAIK,EAAKjB,OAAQY,IACV,iBAAZK,EAAKL,IAAmBX,eAAeiB,WAAWD,EAAKL,IAC9Df,MAAMC,QAAQmB,EAAKL,KAAOpB,KAAK2B,oBAAUF,EAAKL,YAQjC,WACjBX,eAAemB,gBAOG,6BACXd,OAAOX,KAAKM,gBAAgBoB,OAAO,SAACC,EAAGC,UAAQD,EAAEC,GAAKC,EAAKC,IAAIF,GAAKD,GAAI,OD/EpE,IAAI/B"}