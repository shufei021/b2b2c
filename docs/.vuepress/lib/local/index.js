!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).local=t()}(this,function(){"use strict";function s(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)}function n(e){1==arguments.length&&("string"==typeof e?localStorage.removeItem(e):Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&e.forEach(function(e){return localStorage.removeItem(e)}))}function o(){var e,t=a(),r={keys:[],val:{}};for(e in t)s(t[e])&&t[e].hasOwnProperty("expires")&&new Date-t[e].startTime>t[e].expires&&(r.keys.push(e),r.val[e]=t[e]);return r}var a=function(){var e=localStorage.length;if(!e)return{};for(var t={},r=0;r<e;r++){var n=localStorage.key(r);try{t[n]=JSON.parse(localStorage.getItem(n))}catch(e){t[n]=localStorage.getItem(n)}}return t};function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.freeze({__proto__:null,isPureoBbject:s,set:function(){var e=Array.prototype.slice.call(arguments);if(2==e.length)localStorage.setItem(e[0],"string"==typeof e[1]?e[1]:JSON.stringify(e[1]));else if(1==e.length&&s(e[0]))for(var t in e[0])localStorage.setItem(t,"string"==typeof e[0][t]?e[0][t]:JSON.stringify(e[0][t]))},set1:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],a=t[2];if(1==t.length){if(s(n))for(var i in t[0])localStorage.setItem(i,"string"==typeof n[i]?n[i]:JSON.stringify(n[i]))}else if(2==t.length){if("string"==typeof n)localStorage.setItem(n,"string"==typeof o?o:JSON.stringify(o));else if(s(n))for(var l in n)localStorage.setItem(l,JSON.stringify({startTime:+new Date,expires:o,value:n[l]}))}else 3==t.length&&"string"==typeof n&&localStorage.setItem(n,JSON.stringify({startTime:+new Date,expires:a,value:o}))},del:function(e){"string"==typeof e?localStorage.removeItem(e):Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&e.forEach(function(e){return localStorage.removeItem(e)})},update:function(){var e=Array.prototype.slice.call(arguments);2==e.length&&"string"==typeof e[0]&&localStorage.setItem(e[0],JSON.stringify(e[1]))},get:function(e){var t=a();return Object.keys(t)?void 0===e?t:t[e]:null},get1:function(e){var t=localStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t&&t.startTime?new Date-t.startTime>t.expires?(localStorage.removeItem(e),!1):t.value:t},getStore:a,clear:function(){localStorage.clear()},remove:n,openEventListener:function(){var n,r,o;localStorage.setItem=(n=localStorage.setItem,function(e,t){var r=new CustomEvent("setItemEvent",{detail:{setKey:e,value:t}});window.dispatchEvent(r),n.call(this,e,"string"==typeof t?t:JSON.stringify(t))}),localStorage.getItem=(r=localStorage.getItem,function(e){var t=JSON.parse(r.call(this,e)),e=new CustomEvent("getItemEvent",{detail:{getKey:e,value:t}});return window.dispatchEvent(e),t}),localStorage.removeItem=(o=localStorage.removeItem,function(e){var t=new CustomEvent("removeItemEvent",{detail:{removeKey:e}});window.dispatchEvent(t),o.call(this,e)})},openSetItemEvent:function(){var n;localStorage.setItem=(n=localStorage.setItem,function(e,t){var r=new CustomEvent("setItemEvent",{detail:{setKey:e,value:t}});window.dispatchEvent(r),n.call(this,e,"string"==typeof t?t:JSON.stringify(t))})},openGetItemEvent:function(){var r;localStorage.getItem=(r=localStorage.getItem,function(e){var t=JSON.parse(r.call(this,e)),e=new CustomEvent("getItemEvent",{detail:{getKey:e,value:t}});return window.dispatchEvent(e),t})},openRemoveItemEvent:function(){var r;localStorage.removeItem=(r=localStorage.removeItem,function(e){var t=new CustomEvent("removeItemEvent",{detail:{removeKey:e}});window.dispatchEvent(t),r.call(this,e)})},getHasExpired:function(){var e,t=a(),r={};for(e in t)s(t[e])&&t[e].hasOwnProperty("expires")&&(r[e]=t[e]);return r},getHasExpiredKeys:function(){var e,t=a(),r=[];for(e in t)s(t[e])&&t[e].hasOwnProperty("expires")&&r.push(e);return r},getExpired:o,clearExpired:function(e){var t=o().keys;if(arguments.length){if("string"==typeof e&&t.includes(e))n(e);else if(Array.isArray(e)&&e.length)for(var r=0;r<e.length;r++)t.includes(e[r])&&n(e[r])}else t.length&&n(t)},size:function(){return function(e){if(!e)return"";if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}(JSON.stringify(localStorage).length)}}),new e});
//# sourceMappingURL=index.js.map
