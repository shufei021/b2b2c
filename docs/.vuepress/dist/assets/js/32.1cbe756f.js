(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{437:function(a,s,t){"use strict";t.r(s);var n=t(57),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"业务组件库使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#业务组件库使用"}},[a._v("#")]),a._v(" 业务组件库使用")]),a._v(" "),t("h3",{attrs:{id:"handday-components"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#handday-components"}},[a._v("#")]),a._v(" @handday/components")]),a._v(" "),t("blockquote",[t("p",[a._v("Rollup 是一个 JavaScript 模块打包器，可以将小块代码编译成大块复杂的代码，例如 library 或应用程序。Rollup 对代码模块使用新的标准化格式，这些标准都包含在 JavaScript 的 ES6 版本中，而不是以前的特殊解决方案，如 CommonJS 和 AMD。ES6 模块可以使你自由、无缝地使用你最喜爱的 library 中那些最有用独立函数，而你的项目不必携带其他未使用的代码。ES6 模块最终还是要由浏览器原生实现，但当前 Rollup 可以使你提前体验\nrollup 的特点：")])]),a._v(" "),t("ol",[t("li",[a._v("Tree Shaking: 自动移除未使用的代码, 输出更小的文件")]),a._v(" "),t("li",[a._v("Scope Hoisting: 所有模块构建在一个函数内, 执行效率更高")]),a._v(" "),t("li",[a._v("Config 文件支持通过 ESM 模块格式书写")]),a._v(" "),t("li",[a._v("可以一次输出多种格式:\n模块规范: IIFE, AMD, CJS, UMD, ESM\nDevelopment 与 production 版本: .js, .min.js")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("项目根目录：npm install\n")])])]),t("h3",{attrs:{id:"_2-安装包文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装包文件"}},[a._v("#")]),a._v(" 2.安装包文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("root/packages/theme-chalk: npm install\n")])])]),t("h3",{attrs:{id:"_3-开发模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-开发模式"}},[a._v("#")]),a._v(" 3.开发模式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("1. 在项目根目录执行：npm run lib:dev\n2. 样式开发进入=>root/packages/theme-chalk : gulp watch\n\n")])])]),t("h3",{attrs:{id:"_4-组件开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-组件开发"}},[a._v("#")]),a._v(" 4.组件开发")]),a._v(" "),t("h2",{attrs:{id:"组件开发统一在-packages-中开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件开发统一在-packages-中开发"}},[a._v("#")]),a._v(" 组件开发统一在 packages 中开发")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("\n├── packages\n├── button\n│ ├── src\n│ │ ├── main.vue\n├── theme-chalk(固定目录)\n│ ├── button.scss(示例button组件)\n│ ├── index.scss (主文件 所有的组件必须导入到该文件下)\n└──── index.js\n")])])]),t("blockquote",[t("p",[a._v("注: 组件的样式和.vue 文件分开写 建议一个组件一个样式文件")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/refactor/1.png",alt:"图片"}})]),a._v(" "),t("h3",{attrs:{id:"基础组件库和业务项目之间的关联"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础组件库和业务项目之间的关联"}},[a._v("#")]),a._v(" 基础组件库和业务项目之间的关联")]),a._v(" "),t("p",[a._v("创建链接\n假如有两个项目，一个是 npm-module，是我们要开发的 npm 组件,另一个是 npm-example,是我们要运行项目")]),a._v(" "),t("p",[a._v("首先，进入我们的 npm-module 项目，执行 npm link")]),a._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("cd npm"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("module\nnpm link\n")])])]),t("p",[a._v("执行命令后，npm-module 会根据 package.json 中的配置，把 npm-module 链接到全局(快捷键的方式)\nwindow 系统下一般在 "),t("code",[a._v("C:\\Program Files\\nodejs\\node_modules\\@handday")]),a._v("\n然后，进入 npm-example 项目，执行")]),a._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("npm"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("example")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v("mian"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("js 导入组件\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" handdayUi "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@handday/ui'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("一次性全部引用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("button"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@handday/ul'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("按需引用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@handday/ui/lib/theme-chalk.css'")]),a._v("\nVue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("handdayUi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\ncd npm"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("example\nnpm link npm"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("module\n")])])]),t("p",[a._v("最后 npm-module 的修改会被直接映射到 npm-example/node_modules/npm-module 下面")]),a._v(" "),t("h3",{attrs:{id:"组件库上传私服"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件库上传私服"}},[a._v("#")]),a._v(" 组件库上传私服")]),a._v(" "),t("p",[a._v("在项目根目录执行")]),a._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("npm run build\n")])])]),t("blockquote",[t("p",[t("code",[a._v("上传私服时将package.json中的dependencies和devDependencies改为空对象，避免安装组件时时间过长")])])]),a._v(" "),t("div",{staticClass:"language-javscript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('{\n    "name": "@handday/ui",\n    "version": "1.0.3",\n    "main": "lib/index.js",\n    "private": false,\n    "description": "",\n    "author": {\n        "name": "willes"\n    },\n    "scripts": {\n        "serve": "vue-cli-service serve",\n        "build": "npm run lib:build && npm run theme:build",\n        "lib:dev": "rollup --config build/rollup.config.umd.js --watch",\n        "theme:build": "gulp --gulpfile packages/theme-chalk/gulpfile.js",\n        "lib:build": "cross-env NODE_ENV=production rollup --config build/rollup.config.umd.js"\n    },\n    "dependencies": {\n    },\n    "devDependencies": {\n    },\n    "_id": "@handday/ui@1.0.0",\n    "license": "ISC",\n    "readme": "ERROR: No README data found!"\n}\n\n')])])]),t("p",[a._v("上传私服步骤（前提当前镜像指向私服地址使用命名 nrm current 查看）")]),a._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("npm login\n输入用户名、密码、邮箱\nnpm publish\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);